<section class="gh-canvas">
    <header class="gh-canvas-header">
        <h2 class="gh-canvas-title" data-test-screen-title>Users</h2>
        {{!-- Do not show Invite user button to authors --}}
        {{#unless currentUser.isAuthorOrContributor}}
            <section class="view-actions">
                <button class="gh-btn gh-btn-green" {{action "toggleInviteUserModal"}} ><span>Invite people</span></button>
            </section>
        {{/unless}}
    </header>

    {{#if showInviteUserModal}}
        {{gh-fullscreen-modal "invite-new-user"
                              close=(action "toggleInviteUserModal")
                              modifier="action wide"}}
    {{/if}}

    <section class="gh-team">
    <section class="apps-grid-container gh-active-users" data-test-active-users>
        <span class="apps-grid-title">Users</span>
        <div class="apps-grid">
            {{!-- For authors/contributors, only show their own user --}}
            {{#if currentUser.isAuthorOrContributor}}
                {{#gh-user-active user=currentUser as |component|}}
                    {{gh-user-list-item user=currentUser component=component}}
                {{/gh-user-active}}
            {{else}}
                {{#vertical-collection sortedActiveUsers
                    key="id"
                    containerSelector=".gh-main"
                    estimateHeight=75
                    as |user|
                }}
                    {{#gh-user-active user=user as |component|}}
                        {{gh-user-list-item user=user component=component}}
                    {{/gh-user-active}}
                {{/vertical-collection}}
            {{/if}}
        </div>
    </section>
    </section>

    {{!-- Don't show if we have no suspended users or logged in as an author --}}
    {{#if (and suspendedUsers (not currentUser.isAuthorOrContributor))}}
    <section class="apps-grid-container gh-active-users" data-test-suspended-users>
        <span class="apps-grid-title">Suspended users</span>
        <div class="apps-grid">
            {{#each sortedSuspendedUsers key="id" as |user|}}
                {{#gh-user-active user=user as |component|}}
                    {{gh-user-list-item user=user component=component}}
                {{/gh-user-active}}
            {{/each}}
        </div>
    </section>
    {{/if}}
</section>
